require "integrations/requests/apiary/spec_helper"
describe "root" do
include_context "use core context service"
  # --
  # Root
  # --
  # 
  # The root JSON lists all the resources available through the API and all the actions which can be performed. 
  # A resource responds to all the actions listed under its `actions` elements.
  # Consider this URL and the JSON response like the entry point for S2 API. All the other interactions through the 
  # API can be performed browsing this JSON response.
  it "root" do

    header('Accept', 'application/json')
    header('Content-Type', 'application/json')

    response = get "/", nil 
    response.status.should == 200
    response.body.should match_json " {\n         \"actions\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/action\"\n           }\n         },\n         \"batches\": {\n           \"actions\": {\n             \"create\": \"http://example.org/batches\",\n             \"read\": \"http://example.org/batches\",\n             \"first\": \"http://example.org/batches/page=1\",\n             \"last\": \"http://example.org/batches/page=-1\"\n           }\n         },\n         \"users\": {\n           \"actions\": {\n             \"create\": \"http://example.org/users\",\n             \"read\": \"http://example.org/users\",\n             \"first\": \"http://example.org/users/page=1\",\n             \"last\": \"http://example.org/users/page=-1\"\n           }\n         },\n         \"studies\": {\n           \"actions\": {\n             \"create\": \"http://example.org/studies\",\n             \"read\": \"http://example.org/studies\",\n             \"first\": \"http://example.org/studies/page=1\",\n             \"last\": \"http://example.org/studies/page=-1\"\n           }\n         },\n         \"orders\": {\n           \"actions\": {\n             \"create\": \"http://example.org/orders\",\n             \"read\": \"http://example.org/orders\",\n             \"first\": \"http://example.org/orders/page=1\",\n             \"last\": \"http://example.org/orders/page=-1\"\n           }\n         },\n         \"projects\": {\n           \"actions\": {\n             \"create\": \"http://example.org/projects\",\n             \"read\": \"http://example.org/projects\",\n             \"first\": \"http://example.org/projects/page=1\",\n             \"last\": \"http://example.org/projects/page=-1\"\n           }\n         },\n         \"samples\": {\n           \"actions\": {\n             \"create\": \"http://example.org/samples\",\n             \"read\": \"http://example.org/samples\",\n             \"first\": \"http://example.org/samples/page=1\",\n             \"last\": \"http://example.org/samples/page=-1\"\n           }\n         },\n         \"oligos\": {\n           \"actions\": {\n             \"create\": \"http://example.org/oligos\",\n             \"read\": \"http://example.org/oligos\",\n             \"first\": \"http://example.org/oligos/page=1\",\n             \"last\": \"http://example.org/oligos/page=-1\"\n           }\n         },\n         \"aliquots\": {\n           \"actions\": {\n             \"create\": \"http://example.org/aliquots\",\n             \"read\": \"http://example.org/aliquots\",\n             \"first\": \"http://example.org/aliquots/page=1\",\n             \"last\": \"http://example.org/aliquots/page=-1\"\n           }\n         },\n         \"flowcells\": {\n           \"actions\": {\n             \"create\": \"http://example.org/flowcells\",\n             \"read\": \"http://example.org/flowcells\",\n             \"first\": \"http://example.org/flowcells/page=1\",\n             \"last\": \"http://example.org/flowcells/page=-1\"\n           }\n         },\n         \"gels\": {\n           \"actions\": {\n             \"create\": \"http://example.org/gels\",\n             \"read\": \"http://example.org/gels\",\n             \"first\": \"http://example.org/gels/page=1\",\n             \"last\": \"http://example.org/gels/page=-1\"\n           }\n         },\n         \"labellables\": {\n           \"actions\": {\n             \"create\": \"http://example.org/labellables\",\n             \"read\": \"http://example.org/labellables\",\n             \"first\": \"http://example.org/labellables/page=1\",\n             \"last\": \"http://example.org/labellables/page=-1\"\n           }\n         },\n         \"sanger_barcodes\": {\n           \"actions\": {\n             \"create\": \"http://example.org/sanger_barcodes\",\n             \"read\": \"http://example.org/sanger_barcodes\",\n             \"first\": \"http://example.org/sanger_barcodes/page=1\",\n             \"last\": \"http://example.org/sanger_barcodes/page=-1\"\n           }\n         },\n         \"ean13_barcodes\": {\n           \"actions\": {\n             \"create\": \"http://example.org/ean13_barcodes\",\n             \"read\": \"http://example.org/ean13_barcodes\",\n             \"first\": \"http://example.org/ean13_barcodes/page=1\",\n             \"last\": \"http://example.org/ean13_barcodes/page=-1\"\n           }\n         },\n         \"barcode2_ds\": {\n           \"actions\": {\n             \"create\": \"http://example.org/barcode2_ds\",\n             \"read\": \"http://example.org/barcode2_ds\",\n             \"first\": \"http://example.org/barcode2_ds/page=1\",\n             \"last\": \"http://example.org/barcode2_ds/page=-1\"\n           }\n         },\n         \"plates\": {\n           \"actions\": {\n             \"create\": \"http://example.org/plates\",\n             \"read\": \"http://example.org/plates\",\n             \"first\": \"http://example.org/plates/page=1\",\n             \"last\": \"http://example.org/plates/page=-1\"\n           }\n         },\n         \"spin_columns\": {\n           \"actions\": {\n             \"create\": \"http://example.org/spin_columns\",\n             \"read\": \"http://example.org/spin_columns\",\n             \"first\": \"http://example.org/spin_columns/page=1\",\n             \"last\": \"http://example.org/spin_columns/page=-1\"\n           }\n         },\n         \"tubes\": {\n           \"actions\": {\n             \"create\": \"http://example.org/tubes\",\n             \"read\": \"http://example.org/tubes\",\n             \"first\": \"http://example.org/tubes/page=1\",\n             \"last\": \"http://example.org/tubes/page=-1\"\n           }\n         },\n         \"tube_racks\": {\n           \"actions\": {\n             \"create\": \"http://example.org/tube_racks\",\n             \"read\": \"http://example.org/tube_racks\",\n             \"first\": \"http://example.org/tube_racks/page=1\",\n             \"last\": \"http://example.org/tube_racks/page=-1\"\n           }\n         },\n         \"tag_groups\": {\n           \"actions\": {\n             \"create\": \"http://example.org/tag_groups\",\n             \"read\": \"http://example.org/tag_groups\",\n             \"first\": \"http://example.org/tag_groups/page=1\",\n             \"last\": \"http://example.org/tag_groups/page=-1\"\n           }\n         },\n         \"searches\": {\n           \"actions\": {\n             \"create\": \"http://example.org/searches\",\n             \"read\": \"http://example.org/searches\",\n             \"first\": \"http://example.org/searches/page=1\",\n             \"last\": \"http://example.org/searches/page=-1\"\n           }\n         },\n         \"multi_criteria_filters\": {\n           \"actions\": {\n             \"create\": \"http://example.org/multi_criteria_filters\",\n             \"read\": \"http://example.org/multi_criteria_filters\",\n             \"first\": \"http://example.org/multi_criteria_filters/page=1\",\n             \"last\": \"http://example.org/multi_criteria_filters/page=-1\"\n           }\n         },\n         \"label_filters\": {\n           \"actions\": {\n             \"create\": \"http://example.org/label_filters\",\n             \"read\": \"http://example.org/label_filters\",\n             \"first\": \"http://example.org/label_filters/page=1\",\n             \"last\": \"http://example.org/label_filters/page=-1\"\n           }\n         },\n         \"order_filters\": {\n           \"actions\": {\n             \"create\": \"http://example.org/order_filters\",\n             \"read\": \"http://example.org/order_filters\",\n             \"first\": \"http://example.org/order_filters/page=1\",\n             \"last\": \"http://example.org/order_filters/page=-1\"\n           }\n         },\n         \"batch_filters\": {\n           \"actions\": {\n             \"create\": \"http://example.org/batch_filters\",\n             \"read\": \"http://example.org/batch_filters\",\n             \"first\": \"http://example.org/batch_filters/page=1\",\n             \"last\": \"http://example.org/batch_filters/page=-1\"\n           }\n         },\n         \"uuid_resources\": {\n           \"actions\": {\n             \"create\": \"http://example.org/uuid_resources\",\n             \"read\": \"http://example.org/uuid_resources\",\n             \"first\": \"http://example.org/uuid_resources/page=1\",\n             \"last\": \"http://example.org/uuid_resources/page=-1\"\n           }\n         },\n         \"create_batches\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_batch\"\n           }\n         },\n         \"create_flowcells\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_flowcell\"\n           }\n         },\n         \"create_gels\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_gel\"\n           }\n         },\n         \"create_labels\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_label\"\n           }\n         },\n         \"create_labellables\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_labellable\"\n           }\n         },\n         \"create_orders\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_order\"\n           }\n         },\n         \"create_plates\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_plate\"\n           }\n         },\n         \"create_searches\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_search\"\n           }\n         },\n         \"create_spin_columns\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_spin_column\"\n           }\n         },\n         \"create_tubes\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_tube\"\n           }\n         },\n         \"create_tube_racks\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/create_tube_rack\"\n           }\n         },\n         \"plate_transfers\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/plate_transfer\"\n           }\n         },\n         \"tag_wells\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/tag_wells\"\n           }\n         },\n         \"transfer_plates_to_plates\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/transfer_plates_to_plates\"\n           }\n         },\n         \"transfer_tubes_to_tubes\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/transfer_tubes_to_tubes\"\n           }\n         },\n         \"transfer_wells_to_tubes\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/transfer_wells_to_tubes\"\n           }\n         },\n         \"tube_rack_moves\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/tube_rack_move\"\n           }\n         },\n         \"tube_rack_transfers\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/tube_rack_transfer\"\n           }\n         },\n         \"update_orders\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/update_order\"\n           }\n         },\n         \"update_plates\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/update_plate\"\n           }\n         },\n         \"update_tubes\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/update_tube\"\n           }\n         },\n         \"update_tube_racks\": {\n           \"actions\": {\n             \"create\": \"http://example.org/actions/update_tube_rack\"\n           }\n         },\n         \"revision\": 3\n       }\n"
  end
end
